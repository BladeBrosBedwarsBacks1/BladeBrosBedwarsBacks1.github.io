<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Babylon.js 3D Scene</title>
    <style>
        /* Ensures the canvas takes up the full screen */
        html, body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
        #renderCanvas {
            width: 100%;
            height: 100%;
            /* Disables default touch behavior on the canvas */
            touch-action: none; 
        }
    </style>
    <!-- Import the Babylon.js library from a CDN -->
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
</head>
<body>
    <!-- The canvas element where the 3D scene will be rendered -->
    <canvas id="renderCanvas"></canvas>
<!-- Add a physics engine library here -->
<script src="https://cdn.babylonjs.com/cannon.js"></script> 
    <script>
        // Get the canvas element from the HTML
        const canvas = document.getElementById("renderCanvas");
        // Initialize the Babylon.js engine
        const engine = new BABYLON.Engine(canvas, true);

        // Function to create the scene with objects and lights
        const createScene = function () {
            // Create a scene
            const scene = new BABYLON.Scene(engine);
            scene.clearColor = new BABYLON.Color3(0.8, 0.8, 0.8); // Light grey background

            // Create and position a free camera
            const camera = new BABYLON.FreeCamera("camera1", new BABYLON.Vector3(0, 5, -10), scene);
            // Target the camera to the scene origin
            camera.setTarget(BABYLON.Vector3.Zero());
            // Attach the camera to the canvas for user interaction (mouse/touch controls)
            camera.attachControl(canvas, true);

            // Create a light, aiming 0,1,0 - to the sky
            const light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(0, 1, 0), scene);
            light.intensity = 0.7; // Dim the light a small amount

            // Our built-in 'sphere' shape (the basketball)
            const sphere = BABYLON.MeshBuilder.CreateSphere("sphere", {diameter: 2, segments: 32}, scene);
            // Move the sphere upward 1/2 its height
            sphere.position.y = 1;

            // Our built-in 'ground' shape
            const ground = BABYLON.MeshBuilder.CreateGround("ground", {width: 10, height: 10}, scene);
            
            // Inside createScene function:
// Enable the physics engine with a gravity vector and the selected plugin
scene.enablePhysics(new BABYLON.Vector3(0, -9.81, 0), new BABYLON.CannonJSPlugin());

// Add a physics impostor to the sphere (the ball)
sphere.physicsImpostor = new BABYLON.PhysicsImpostor(
    sphere, 
    BABYLON.PhysicsImpostor.SphereImpostor, 
    { mass: 1, restitution: 0.7 }, // Mass of 1 kg, restitution (bounciness) of 0.7
    scene
);

// Add a physics impostor to the ground
ground.physicsImpostor = new BABYLON.PhysicsImpostor(
    ground, 
    BABYLON.PhysicsImpostor.BoxImpostor, 
    { mass: 0, restitution: 0.9 }, // Mass of 0 means it's static
    scene
);

            
            return scene;
        };

        // Call the createScene function
        const scene = createScene();

        // Register a render loop to repeatedly render the scene at every frame
        engine.runRenderLoop(function () {
            scene.render();
        });

        // Watch for browser/canvas resize events
        window.addEventListener("resize", function () {
            engine.resize();
        });
    </script>
</body>
</html>
